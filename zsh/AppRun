#!/bin/bash

yellow=$(tput setaf 3) # 3 = yellow text
reset=$(tput sgr0)     # white text by default

test -z "$APPIMAGE_EXTRACT_AND_RUN" &&
(
  clear
  echo $yellow
  echo -e "usage:"
  echo -e "export APPIMAGE_EXTRACT_AND_RUN=1"
  echo -e "./zsh.appimage \n\n\n"
  echo $reset
)

export ZDOTDIR="$APPDIR/usr/home/user/.config/zsh"
export PATH="$APPDIR/.pixi/envs/default/bin:$PATH"
pixi reinstall --no-progress --locked --manifest-path $APPDIR/pixi.toml 2>/dev/null
[ ! -e /.dockerenv ] && unset APPIMAGE_EXTRACT_AND_RUN # APPIMAGE_EXTRACT_AND_RUN makes yazi.appimage to have slow startup
zsh $@
